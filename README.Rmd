---
title: "pins: Pin and Share Remote Resources"
output:
  github_document:
    fig_width: 9
    fig_height: 5
---

```{r setup, echo=FALSE, message=FALSE}
knitr::opts_chunk$set(eval = TRUE)
knitr::opts_chunk$set(warning = FALSE)
knitr::opts_chunk$set(fig.path = "tools/readme/", dev = "png")
```

# pins: Pin and Share Remote Resources

[![Build Status](https://travis-ci.org/rstudio/pins.svg?branch=master)](https://travis-ci.org/rstudio/pins)
[![CRAN_Status_Badge](https://www.r-pkg.org/badges/version/pins)](https://cran.r-project.org/package=pins)
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-red.svg)](https://www.tidyverse.org/lifecycle/#experimental)

You can use the `pins` package from **R**, or **Python**, to:

- **Pin** remote files into a local cache with `pin()` to work offline and even if the remote resource is removed.
- **Share** resources by pinning them to GitHub, Kaggle or RStudio Connect; find pins with `pin_find()` and retrieve their contents with `fetch()`.

To start using `pins`, install this package as follows:

``` r
install.packages("remotes")
remotes::install_github("rstudio/pins")
```

You can **pin** remote files with `pin()` to cache those files locally, such that, even if the remote resource is removed or while working offline, your code will keep working by using a local cache:

```{r message=FALSE}
library(tidyverse)
library(pins)

retail_sales <- read_csv(pin("https://raw.githubusercontent.com/facebook/prophet/master/examples/example_retail_sales.csv"))
```

You can also cache intermediate results to avoid having to recompute expensive operations:

```{r}
retail_sales %>%
  group_by(month = lubridate::month(ds, T)) %>%
  summarise(total = sum(y)) %>%
  pin("sales_by_month")
```

You can also find remote resources using `pin_find()` which can search CRAN packages and Kaggle. Kaggle requires to configure it by running once `board_register("kaggle", token = "<path-to-kaggle.json>")`. Then we can search resources mentioning "seattle" in CRAN packages and Kaggle with ease:

```{r echo=FALSE}
pin_find("seattle")
```

Notice that all pins are referenced as `<owner>/<name>` and even if the `<owner>` is not provided, `pins()` will assign an appropriate one.

You can then retrieve a pin as a local path through `pin_get()`,

```{r}
pin_get("hpiR/seattle_sales")
```

Finally, you can also **share** resources with others by publishing to particular to Kaggle, GitHub and RStudio Connect. We can easily publish `iris` to Kaggle as follows:

``` r
pin(iris, board = "kaggle")
```

And use all the functionality available in `pins` from Python as well:

```{python eval=FALSE}
import pins

pins.pin_get("hpiR/seattle_sales")
```

There are other boards you can use or even create custom boards as described in the [Understanding Boards](https://rstudio.github.io/pins/articles/boards.html) article; in addition, `pins` can also be used with RStudio products which we will describe next.

## RStudio

You can use [RStudio](https://www.rstudio.com/products/rstudio/) to discover and pin remote files and [RStudio Connect](https://www.rstudio.com/products/connect/) to share content within your organization with ease.

To find remote resources, simply expand the "Addins" menu and select "Find Pin" from the dropdown:

![](tools/readme/rstudio-discover-pins.png)

Notice that, the RStudio connections pane helps you track your pins by providing each board as a connection you can explore:

![](tools/readme/rstudio-explore-pins.png)

You can **share** local files and content using the RStudio Connect board. Lets use `dplyr` and the `hpiR_seattle_sales` pin to analyze this further and then share our results in RStudio Connect:

```{r}
use_board("rstudio")
```

```{r}
fetch("hpiR/seattle_sales") %>%
  group_by(baths = ceiling(baths)) %>%
  summarise(sale = floor(mean(sale_price))) %>%
  pin("sales-by-baths")
```

![](tools/readme/rstudio-share-pins.png)

You can now set the appropriate permissions in RStudio Connect, and voila! From now on, those with access can make use of this remote file locally!

For instance, a colleague can reuse the `sales-by-baths` pin by retrieving it from RStudio Connect and visualize its contents using `ggplot2`:

```{r rstudio-plot-pin}
fetch("sales-by-baths") %>%
  ggplot(aes(x = baths, y = sale)) +
    theme_light() + geom_point() +
    geom_smooth(method = 'lm', formula = y ~ exp(x))
```

Please make sure to ~~pin~~ visit [rstudio.github.io/pins](https://rstudio.github.io/pins/) to find detailed documentation and additional resources.
